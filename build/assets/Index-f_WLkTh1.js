import{z as x,T as W,o as d,f as i,a as s,u as o,w as l,F as g,Z as q,e as n,b as t,t as a,p as C,n as O,g as B,c as z,j as N,s as E,k as K,q as L}from"./app-BFdvWdPW.js";import{_ as G}from"./AuthenticatedLayout-DLkwLcfa.js";import{C as Q,T as u,a as p}from"./CardTable-l0smLcxO.js";import{_ as y}from"./Button-DFQRb66K.js";import{_ as R}from"./InputError-a4mSKZfl.js";import{_ as T}from"./Modal-joEd8Ug0.js";import{g as f,f as Y,t as Z,n as J,s as $}from"./Helper-BCdQTIvK.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-B1CxOjRT.js";import"./AsyncVueSelect-B28Y1GZM.js";import"./SubmitButton-D3rMXE0N.js";const X={class:"flex flex-wrap"},I={class:"w-full px-4"},ee={class:"flex justify-between items-center"},te={class:"text-2xl"},le=t("br",null,null,-1),se=t("br",null,null,-1),ae=t("br",null,null,-1),ne=t("br",null,null,-1),oe=t("br",null,null,-1),ue={key:0,class:"flex"},de=t("i",{class:"fa fa-money-bill-wave"},null,-1),ie=t("i",{class:"fa fa-handshake"},null,-1),re={key:0,class:"text-xs font-semibold inline-block py-1 px-2 rounded text-emerald-600 bg-emerald-200"},ce={key:1,class:"text-xs font-semibold inline-block py-1 px-2 rounded text-amber-600 bg-amber-200"},_e={key:2,class:"text-xs font-semibold inline-block py-1 px-2 rounded text-purple-600 bg-purple-200"},fe={key:3,class:"text-xs font-semibold inline-block py-1 px-2 rounded text-red-600 bg-red-200"},pe={key:4,class:"text-xs font-semibold inline-block py-1 px-2 rounded text-blue-600 bg-blue-200"},me=t("i",{class:"fa fa-list"},null,-1),be={class:"relative flex flex-col min-w-0 break-words w-full mb-6 rounded bg-white"},he={class:"block w-full overflow-x-auto"},xe={class:"items-center w-full bg-transparent border-collapse"},ye=["src"],ve={class:"ml-3 font-bold text-blueGray-600"},ge=t("br",null,null,-1),we=t("i",{class:"fa fa-eye"},null,-1),ke={class:"flex mt-1"},Pe=["value"],Se=t("br",null,null,-1),Ce=t("br",null,null,-1),Oe=t("strong",null,"Note: ",-1),Fe={__name:"Index",props:{filters:{type:Object},orders:{type:Object},orderPaidByTypes:{type:Object}},setup(m){const _=x(null),w=x(!1),k=x(!1),P=x(!1),A=x(["Order Number","Customer","Summary("+f()+")","Paid","Due","Profit","Loss","Status","Date","Action"]),r=W({amount:null,paid_through:"cash"}),V=c=>{_.value=c,w.value=!0},H=c=>{_.value=c,r.amount=c.due,k.value=!0},D=()=>{r.put(route("orders.pay",_.value.id),{preserveScroll:!0,onSuccess:()=>{b(),$()}})},U=c=>{_.value=c,P.value=!0},F=()=>{r.put(route("orders.settle",_.value.id),{preserveScroll:!0,onSuccess:()=>{b(),$()}})},b=()=>{w.value=!1,k.value=!1,P.value=!1};return(c,v)=>(d(),i(g,null,[s(o(q),{title:"Order"}),s(G,null,{breadcrumb:l(()=>[n(" Orders ")]),default:l(()=>{var j;return[t("div",X,[t("div",I,[s(Q,{indexRoute:"orders.index",paginatedData:m.orders,filters:m.filters,tableHeads:A.value},{cardHeader:l(()=>[t("div",ee,[t("h4",te,"Apply filters("+a(m.orders.total)+")",1),s(y,{href:c.route("carts.index"),buttonType:"link"},{default:l(()=>[n("Create Order")]),_:1},8,["href"])])]),default:l(()=>[(d(!0),i(g,null,C(m.orders.data,(e,S)=>(d(),i("tr",{key:e.id},[s(u,null,{default:l(()=>[t("strong",null,"#"+a(e.order_number),1)]),_:2},1024),s(u,null,{default:l(()=>[n(a(e.customer?e.customer.name:"Unknown"),1)]),_:2},1024),s(u,{class:"text-start"},{default:l(()=>[t("span",null,"Sub Total: "+a(e.sub_total),1),le,t("span",null,"Tax: "+a(e.tax_total),1),se,t("span",null,"Discount: "+a(e.discount_total),1),ae,t("span",null,"Total: "+a(e.total),1),ne]),_:2},1024),s(u,null,{default:l(()=>[n(a(o(f)())+a(e.paid),1)]),_:2},1024),s(u,null,{default:l(()=>[t("span",{class:O(e.due>0?"text-red-500 text-xl font-bold":"")},a(o(f)())+a(e.due),3),oe,e.due>0?(d(),i("div",ue,[s(y,{onClick:h=>H(e),title:"Pay Due",class:"px-2"},{default:l(()=>[de]),_:2},1032,["onClick"]),s(y,{onClick:h=>U(e),type:"red",class:"px-2",title:"Settle"},{default:l(()=>[ie]),_:2},1032,["onClick"])])):B("",!0)]),_:2},1024),s(u,{class:O(e.profit>0?"text-emerald-500 font-bold":"")},{default:l(()=>[n(a(o(f)())+a(e.profit),1)]),_:2},1032,["class"]),s(u,{class:O(e.loss>0?"text-red-500 font-bold":"")},{default:l(()=>[n(a(o(f)())+a(e.loss),1)]),_:2},1032,["class"]),s(u,null,{default:l(()=>[e.status==="paid"?(d(),i("span",re,"Paid")):e.status==="partial_paid"?(d(),i("span",ce,"Partial Paid")):e.status==="over_paid"?(d(),i("span",_e,"Over Paid")):e.status==="unpaid"?(d(),i("span",fe,"Unpaid")):(d(),i("span",pe,"Settled"))]),_:2},1024),s(u,null,{default:l(()=>[n(a(o(Y)(e.created_at)),1)]),_:2},1024),s(u,null,{default:l(()=>[s(y,{onClick:h=>V(e),title:"Order Items"},{default:l(()=>[me]),_:2},1032,["onClick"])]),_:2},1024)]))),128))]),_:1},8,["paginatedData","filters","tableHeads"])])]),s(T,{title:"Order Items("+((j=_.value)==null?void 0:j.order_items.length)+")",show:w.value,onClose:b,maxWidth:"4xl",showSubmitButton:!1},{default:l(()=>[t("div",be,[t("div",he,[t("table",xe,[t("thead",null,[t("tr",null,[s(p,null,{default:l(()=>[n("Product Name")]),_:1}),s(p,null,{default:l(()=>[n("Product Number")]),_:1}),s(p,null,{default:l(()=>[n("Product Code")]),_:1}),s(p,null,{default:l(()=>[n("Price")]),_:1}),s(p,null,{default:l(()=>[n("Quantity")]),_:1}),s(p,null,{default:l(()=>[n("Action")]),_:1})])]),t("tbody",null,[(d(!0),i(g,null,C(_.value.order_items,(e,S)=>(d(),i("tr",{key:e.id},[s(u,{class:"text-left flex items-center",title:e.product_json.name},{default:l(()=>[t("img",{src:e.product_json.photo,class:"h-12 w-12 bg-white rounded-full border",alt:"Inventory management system"},null,8,ye),t("span",ve,a(o(Z)(e.product_json.name,15)),1)]),_:2},1032,["title"]),s(u,null,{default:l(()=>[n(a(e.product_json.product_number),1)]),_:2},1024),s(u,null,{default:l(()=>[n(a(e.product_json.product_code),1)]),_:2},1024),s(u,null,{default:l(()=>[n(" Buying: "),t("strong",null,a(o(f)())+a(e.product_json.buying_price),1),ge,n(" Selling: "),t("strong",null,a(o(f)())+a(e.product_json.selling_price),1)]),_:2},1024),s(u,null,{default:l(()=>{var h,M;return[t("strong",null,a(o(J)(e.quantity))+a((M=(h=e.product)==null?void 0:h.unit_type)==null?void 0:M.symbol),1)]}),_:2},1024),s(u,null,{default:l(()=>[e.product_id?(d(),z(y,{key:0,href:c.route("products.edit",e.product_id),buttonType:"link",preserveScroll:""},{default:l(()=>[we]),_:2},1032,["href"])):B("",!0)]),_:2},1024)]))),128))])])])])]),_:1},8,["title","show"]),s(T,{title:"Pay Due",show:k.value,formProcessing:o(r).processing,onClose:b,onSubmitAction:D,maxWidth:"sm"},{default:l(()=>[t("div",null,[t("div",ke,[N(t("select",{id:"paid_through","onUpdate:modelValue":v[0]||(v[0]=e=>o(r).paid_through=e),class:"w-1/2 rounded-l-md bg-gray-300 border-none px-2 py-2 outline-none focus:outline-none"},[(d(!0),i(g,null,C(m.orderPaidByTypes,(e,S)=>(d(),i("option",{key:S,value:e.value},a(e.label),9,Pe))),128))],512),[[E,o(r).paid_through]]),N(t("input",{id:"paid",placeholder:"Enter paid amount","onUpdate:modelValue":v[1]||(v[1]=e=>o(r).amount=e),onKeyup:L(D,["enter"]),type:"text",class:"w-full rounded-r-md border border-gray-200 px-2 py-2 shadow-sm outline-none focus:outline-none focus:shadow-outline"},null,544),[[K,o(r).amount]])]),s(R,{message:o(r).errors.amount},null,8,["message"])])]),_:1},8,["show","formProcessing"]),s(T,{title:"Due Settlement",show:P.value,formProcessing:o(r).processing,onClose:b,onSubmitAction:F,maxWidth:"md",submitButtonText:"Yes, settle it!"},{default:l(()=>[n(" Are you sure you want to settle this due payment? "),Se,Ce,Oe,n("The due amount will be applied as discount. ")]),_:1},8,["show","formProcessing"])]}),_:1})],64))}};export{Fe as default};
