import{T as P,m as k,o as c,f as a,a as f,u as o,w,F as v,Z as Q,e as y,b as t,p as S,t as n,g as C,n as j,q as A,j as g,s as T,k as V,O as b,x as K,y as E}from"./app-BFdvWdPW.js";import{_ as M}from"./AuthenticatedLayout-DLkwLcfa.js";import{A as z}from"./AsyncVueSelect-B28Y1GZM.js";import{t as q,g as r,n as p,s as x}from"./Helper-BCdQTIvK.js";import{_ as N}from"./InputError-a4mSKZfl.js";import{_ as L}from"./SubmitButton-D3rMXE0N.js";import{_ as Z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-B1CxOjRT.js";const u=l=>(K("data-v-34188d5d"),l=l(),E(),l),G={class:"flex flex-wrap"},H={class:"w-full px-4"},J={class:"relative -mt-16 flex flex-col min-w-0 break-words w-full mb-6 shadow-lg rounded bg-white"},R={class:"flex lg:flex-row flex-col-reverse shadow-lg"},W={class:"lg:w-4/5 min-h-screen shadow-lg overflow-auto max-h-screen"},X=u(()=>t("div",{class:"flex flex-row justify-between items-center px-5 mt-5"},[t("div",{class:"text-gray-800"},[t("div",{class:"font-bold text-xl"},"Products")])],-1)),Y={class:"grid grid-cols-3 gap-4 px-5 mt-5 overflow-y-auto h-4/6"},tt=["title","onClick"],et={class:"flex justify-center items-center md:p-3"},st=["src","alt"],ot={class:"flex pb-3 px-3 text-sm"},nt={class:"flex-grow truncate mr-1"},lt={key:0,class:"text-xs font-semibold inline-block py-1 px-2 rounded text-emerald-600 bg-emerald-200"},dt={key:1,class:"text-xs font-semibold inline-block py-1 px-2 rounded text-red-600 bg-red-200"},it={class:"nowrap font-semibold"},ct={class:"lg:w-2/5"},at={class:"flex flex-row items-center justify-between px-5 mt-5"},ut=u(()=>t("div",{class:"font-bold text-xl"},"Cart",-1)),rt={class:"font-semibold"},mt=["role"],_t={class:"px-5 py-2 overflow-y-auto h-64"},pt=["title"],xt=["src","alt"],ft={class:"ml-1 font-semibold text-sm"},bt=u(()=>t("br",null,null,-1)),ht={class:"flex justify-between"},yt=["onClick"],vt=["onKeyup","value"],gt=["onClick"],wt={class:"font-semibold text-lg w-16 text-center"},St=["onClick"],kt={class:"px-5 mt-1"},Ct={class:"pt-2 rounded-md shadow-lg"},jt={class:"px-4 flex justify-between"},Tt=u(()=>t("span",{class:"font-semibold text-sm"},"Subtotal",-1)),Vt={class:"font-bold"},qt={class:"px-4 flex justify-between"},Nt={class:"font-semibold text-sm"},$t={class:"font-bold"},Dt={class:"px-4 flex justify-between"},Ot={key:0,class:"font-semibold text-sm"},Ft={key:1,class:"font-semibold text-sm"},It={class:"font-bold"},Ut={class:"px-4 flex justify-between items-center"},Bt={class:"text-sm flex items-center flex-wrap"},Pt=u(()=>t("span",{class:"font-semibold text-sm mr-1"},"Custom Discount - ",-1)),Qt={class:"flex"},At=u(()=>t("option",{value:"fixed"},"=",-1)),Kt=u(()=>t("option",{value:"percentage"},"%",-1)),Et=[At,Kt],Mt={key:0,class:"font-bold"},zt={key:1,class:"font-bold"},Lt={class:"border-t-2 mt-3 py-2 px-4 flex items-center justify-between"},Zt=u(()=>t("span",{class:"font-semibold text-2xl"},"Total",-1)),Gt={class:"font-bold text-2xl"},Ht={class:"px-5 mt-1"},Jt={class:"rounded-md shadow-lg px-4 py-4"},Rt=u(()=>t("label",{for:"customer",class:"text-stone-600 text-sm font-medium"},"Customer",-1)),Wt=u(()=>t("label",{for:"paid",class:"text-stone-600 text-sm font-medium"},"Pay",-1)),Xt={class:"flex mt-1"},Yt=["value"],te={class:"px-5 mt-3 mb-4"},ee={__name:"Pos",props:{products:Object,carts:Object,cartSubtotal:Number,discountType:String,discount:Number,totalDiscount:Number,tax:Number,totalTax:Number,total:Number,orderPaidByTypes:Object},setup(l){const m=l,s=P({customer_id:null,total:null,paid:null,paid_through:"cash",custom_discount:{discount:0,discount_type:"fixed"}});k(m,d=>{s.custom_discount.discount_type==="fixed"?(s.total=d.total-s.custom_discount.discount,s.paid=d.total-s.custom_discount.discount):(s.total=p(d.total-d.cartSubtotal*(s.custom_discount.discount/100)),s.paid=p(d.total-d.cartSubtotal*(s.custom_discount.discount/100)))},{immediate:!0}),k(()=>s.custom_discount,async(d,i)=>{s.custom_discount.discount_type==="fixed"?(s.total=m.total-s.custom_discount.discount,s.paid=m.total-s.custom_discount.discount):(s.total=p(m.total-m.cartSubtotal*(s.custom_discount.discount/100)),s.paid=p(m.total-m.cartSubtotal*(s.custom_discount.discount/100)))},{immediate:!0,deep:!0});const $=d=>{b.post(route("carts.store",d.id),{},{preserveScroll:!0,onSuccess:()=>{x()}})},D=d=>{b.put(route("carts.increment",d.id),{},{preserveScroll:!0,onSuccess:()=>{x()}})},O=d=>{b.put(route("carts.decrement",d.id),{},{preserveScroll:!0,onSuccess:()=>{x()}})},F=(d,i)=>{d.quantity!=i&&b.put(route("carts.update",d.id),{quantity:i},{preserveScroll:!0,onSuccess:()=>{x()}})},I=d=>{b.delete(route("carts.delete",d.id),{preserveScroll:!0,onSuccess:()=>{x()}})},U=()=>{b.delete(route("carts.delete.all"),{onSuccess:()=>{x()}})},B=()=>{m.carts.total&&s.post(route("orders.store"),{preserveScroll:!0,onSuccess:()=>{x(),s.reset()}})};return(d,i)=>(c(),a(v,null,[f(o(Q),{title:"Product"}),f(M,null,{breadcrumb:w(()=>[y(" POS ")]),default:w(()=>[t("div",G,[t("div",H,[t("div",J,[t("div",R,[t("div",W,[X,t("div",Y,[(c(!0),a(v,null,S(l.products.data,(e,h)=>{var _;return c(),a("div",{key:e.id,role:"button",class:"select-none cursor-pointer transition-shadow rounded-md bg-white shadow hover:shadow-lg border border-gray-200 flex flex-col justify-between max-h-56",title:e.name,onClick:se=>$(e)},[t("div",et,[t("img",{src:e.photo,class:"max-h-40 object-cover rounded-md",alt:e.name},null,8,st)]),t("div",ot,[t("p",nt,[e.quantity>0?(c(),a("span",lt,n(e.quantity)+n((_=e.unit_type)==null?void 0:_.symbol),1)):C("",!0),e.quantity<1?(c(),a("span",dt,"0")):C("",!0),y(" "+n(o(q)(e.name,11)),1)]),t("p",it,n(o(r)())+n(e.selling_price),1)])],8,tt)}),128))])]),t("div",ct,[t("div",at,[ut,t("div",rt,[t("span",{onClick:i[0]||(i[0]=e=>l.carts.total>0?U():null),role:l.carts.total>0?"button":null,class:"px-4 py-2 rounded-md bg-red-100 text-red-500"},"Clear("+n(l.carts.total)+")",9,mt)])]),t("div",_t,[(c(!0),a(v,null,S(l.carts.data,e=>{var h;return c(),a("div",{key:e.id,class:j(["flex flex-row justify-between items-center mb-4",e.quantity>e.product.quantity?"bg-red-200":""])},[t("div",{class:"flex flex-row items-center w-2/5",title:e.product.name},[t("img",{src:e.product.photo,class:"w-10 h-10 object-cover rounded-md",alt:e.product.name},null,8,xt),t("span",ft,[y(n(o(q)(e.product.name))+" ",1),bt,y(" Q: "+n(o(p)(e.product.quantity))+" "+n((h=e.product.unit_type)==null?void 0:h.symbol),1)])],8,pt),t("div",ht,[t("span",{role:"button",onClick:_=>O(e),class:"px-3 py-1 rounded-l-md bg-gray-300"},"-",8,yt),t("input",{onKeyup:A(_=>F(e,_.target.value),["enter"]),type:"number",class:"font-semibold border-gray-300 px-0.5 py-1 w-10 text-center",value:e.quantity},null,40,vt),t("span",{onClick:_=>D(e),role:"button",class:"px-3 py-1 rounded-r-md bg-gray-300"},"+",8,gt)]),t("div",wt,n(o(r)())+n(o(p)(e.quantity*e.product.selling_price)),1),t("i",{onClick:_=>I(e),role:"button",class:"fa fa-trash-alt text-red-500"},null,8,St)],2)}),128))]),t("div",kt,[t("div",Ct,[t("div",jt,[Tt,t("span",Vt,n(o(r)())+n(l.cartSubtotal),1)]),t("div",qt,[t("span",Nt,"Sales Tax("+n(l.tax)+"%)",1),t("span",$t,n(o(r)())+n(l.totalTax),1)]),t("div",Dt,[l.discountType==="fixed"?(c(),a("span",Ot,"Discount("+n(o(r)())+n(l.discount)+")",1)):(c(),a("span",Ft,"Discount("+n(l.discount)+"%)",1)),t("span",It,"- "+n(o(r)())+n(l.totalDiscount),1)]),t("div",Ut,[t("div",Bt,[Pt,t("div",Qt,[g(t("select",{"onUpdate:modelValue":i[1]||(i[1]=e=>o(s).custom_discount.discount_type=e),class:"px-3 py-1 w-14 rounded-l-md bg-gray-300 border-none"},Et,512),[[T,o(s).custom_discount.discount_type]]),g(t("input",{"onUpdate:modelValue":i[2]||(i[2]=e=>o(s).custom_discount.discount=e),type:"number",class:"font-semibold border-gray-300 px-0.5 py-1 w-10 text-center"},null,512),[[V,o(s).custom_discount.discount]])])]),o(s).custom_discount.discount_type==="fixed"?(c(),a("span",Mt,"- "+n(o(r)())+n(o(s).custom_discount.discount),1)):(c(),a("span",zt,"- "+n(o(r)())+n(o(p)(l.cartSubtotal*(o(s).custom_discount.discount/100))),1))]),t("div",Lt,[Zt,t("span",Gt,n(o(r)())+n(o(s).total),1)])])]),t("div",Ht,[t("div",Jt,[t("div",null,[Rt,f(z,{modelValue:o(s).customer_id,"onUpdate:modelValue":i[3]||(i[3]=e=>o(s).customer_id=e),class:"my-1",resource:"customers.index",placeholder:"Select Customer"},null,8,["modelValue"]),f(N,{message:o(s).errors.customer_id},null,8,["message"])]),t("div",null,[Wt,t("div",Xt,[g(t("select",{id:"paid_through","onUpdate:modelValue":i[4]||(i[4]=e=>o(s).paid_through=e),class:"w-1/2 rounded-l-md bg-gray-300 border-none px-2 py-2 outline-none focus:outline-none"},[(c(!0),a(v,null,S(l.orderPaidByTypes,(e,h)=>(c(),a("option",{key:h,value:e.value},n(e.label),9,Yt))),128))],512),[[T,o(s).paid_through]]),g(t("input",{id:"paid",placeholder:"Enter paid amount","onUpdate:modelValue":i[5]||(i[5]=e=>o(s).paid=e),type:"text",class:"w-full rounded-r-md border border-gray-200 px-2 py-2 shadow-sm outline-none focus:outline-none focus:shadow-outline"},null,512),[[V,o(s).paid]])]),f(N,{message:o(s).errors.paid},null,8,["message"])])])]),t("div",te,[f(L,{onClick:B,processing:o(s).processing,class:j(["w-full px-4 py-4 rounded-md shadow-lg text-center bg-emerald-500 text-white font-semibold focus:outline-none",l.carts.total?"":"cursor-not-allowed"])},{default:w(()=>[y("Pay & Print")]),_:1},8,["processing","class"])])])])])])])]),_:1})],64))}},re=Z(ee,[["__scopeId","data-v-34188d5d"]]);export{re as default};
